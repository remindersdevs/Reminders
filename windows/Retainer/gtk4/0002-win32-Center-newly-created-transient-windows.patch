From 14bf85b1f6372a1ae42096c53d88dfac880f3938 Mon Sep 17 00:00:00 2001
From: dgsasha <dgsasha04@gmail.com>
Date: Mon, 29 May 2023 20:11:44 -0400
Subject: [PATCH 2/4] win32: Center newly created transient windows

Fixes https://gitlab.gnome.org/GNOME/gtk/-/issues/5407
---
 gdk/win32/gdksurface-win32.c | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

diff --git a/gdk/win32/gdksurface-win32.c b/gdk/win32/gdksurface-win32.c
index 4666891fd7..6d8a181b8d 100644
--- a/gdk/win32/gdksurface-win32.c
+++ b/gdk/win32/gdksurface-win32.c
@@ -1021,11 +1021,7 @@ show_window_internal (GdkSurface *window,
 
       if (center)
 	{
-	  window_rect.left = 0;
-	  window_rect.top = 0;
-	  window_rect.right = window->width * surface->surface_scale;
-	  window_rect.bottom = window->height * surface->surface_scale;
-	  _gdk_win32_adjust_client_rect (window, &window_rect);
+	  GetWindowRect (GDK_SURFACE_HWND (window), &window_rect);
 
 	  x = center_on_rect.left + ((center_on_rect.right - center_on_rect.left) - (window_rect.right - window_rect.left)) / 2;
 	  y = center_on_rect.top + ((center_on_rect.bottom - center_on_rect.top) - (window_rect.bottom - window_rect.top)) / 2;
-- 
2.33.0.windows.2

